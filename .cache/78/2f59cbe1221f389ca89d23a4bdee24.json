{"id":"DGLw","dependencies":[{"name":"/project/TypeScript-Ecosystem-Game/tsconfig.json","includedInParent":true,"mtime":1683654674051},{"name":"/project/TypeScript-Ecosystem-Game/package.json","includedInParent":true,"mtime":1683828163988},{"name":"./classes","loc":{"line":4,"column":24,"index":133},"parent":"/project/TypeScript-Ecosystem-Game/src/beginGameLoop.ts","resolved":"/project/TypeScript-Ecosystem-Game/src/classes.ts"},{"name":"./util/findNearestCell","loc":{"line":5,"column":32,"index":179},"parent":"/project/TypeScript-Ecosystem-Game/src/beginGameLoop.ts","resolved":"/project/TypeScript-Ecosystem-Game/src/util/findNearestCell.ts"},{"name":"./renderBoard","loc":{"line":6,"column":28,"index":234},"parent":"/project/TypeScript-Ecosystem-Game/src/beginGameLoop.ts","resolved":"/project/TypeScript-Ecosystem-Game/src/renderBoard.ts"},{"name":"lodash","loc":{"line":7,"column":23,"index":275},"parent":"/project/TypeScript-Ecosystem-Game/src/beginGameLoop.ts","resolved":"/project/TypeScript-Ecosystem-Game/node_modules/lodash/lodash.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.beginGameLoop=void 0;var e,t,n=require(\"./classes\"),r=require(\"./util/findNearestCell\"),o=require(\"./renderBoard\"),a=require(\"lodash\");function s(s){var i=s.initialBoardState,c=s.board;e=i,(0,o.renderBoard)({boardState:e,board:c});var l=setInterval(function(){console.log(\"ROUND BEGINNING\"),t=(0,a.cloneDeep)(e);for(var s=0,i=e;s<i.length;s++)for(var l=0,u=i[s];l<u.length;l++){var f=u[l];if(f.contents.length>1)for(var d=0,v=f.contents;d<v.length;d++){var g=v[d];if(g instanceof n.Animal){g.increaseDesires();var y=g.getGreatestDesire();switch(console.log(g.type+\"'s greatest desire: \"+y),y){case\"looking for water\":var h=(0,r.findNearestCell)(f.x,f.y,e,function(e){return e.contents.some(function(e){return e instanceof n.Water})});if(h&&(1===Math.abs(h.x-f.x)||h.x===f.x)&&(1===Math.abs(h.y-f.y)||h.y===f.y))break;var x=[f.x+Math.sign(h.x-f.x),f.y+Math.sign(h.y-f.y)],b=x[0],p=x[1],m=[[b,p],[b,f.y],[f.x,p]].filter(function(t){var n=t[0],r=t[1];return n>=0&&n<e.length&&r>=0&&r<e[0].length&&!e[n][r].contents.some(function(e){return e.isObstacle})}),N=m.length>0?m[0]:[f.x,f.y],B=N[0],G=N[1],M=t[B][G];if(!M.contents.some(function(e){return e.isObstacle})&&!M.contents.some(function(e){return e instanceof n.Animal})){var k=t[f.x][f.y].contents.pop();M.contents.push(k)}}}}}e=t,(0,o.renderBoard)({boardState:e,board:c})},3e3);window.addEventListener(\"keyup\",function(e){\"Escape\"===e.key&&clearInterval(l)})}exports.beginGameLoop=s;"},"sourceMaps":{"js":{"mappings":[{"source":"src/beginGameLoop.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":0}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":13}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":20}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":35}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":43}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":56}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":57}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":64}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":68}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":76}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":95}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":97}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":11,"column":4},"generated":{"line":1,"column":101}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":12,"column":4},"generated":{"line":1,"column":103}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":105}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":107}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":115}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":128}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":130}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":138}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":164}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":166}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":174}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":191}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":193}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":201}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":211}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":14,"column":16},"generated":{"line":1,"column":220}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":14,"column":30},"generated":{"line":1,"column":222}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":15,"column":2},"generated":{"line":1,"column":225}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":15,"column":2},"generated":{"line":1,"column":229}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":15,"column":19},"generated":{"line":1,"column":231}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":15,"column":19},"generated":{"line":1,"column":233}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":16,"column":2},"generated":{"line":1,"column":251}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":16,"column":7},"generated":{"line":1,"column":253}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":16,"column":7},"generated":{"line":1,"column":255}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":19,"column":2},"generated":{"line":1,"column":261}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":19,"column":15},"generated":{"line":1,"column":263}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":20,"column":2},"generated":{"line":1,"column":266}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":20,"column":2},"generated":{"line":1,"column":268}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":20,"column":2},"generated":{"line":1,"column":270}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":20,"column":14},"generated":{"line":1,"column":283}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":20,"column":16},"generated":{"line":1,"column":284}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":20,"column":26},"generated":{"line":1,"column":295}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":20,"column":28},"generated":{"line":1,"column":297}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":20,"column":33},"generated":{"line":1,"column":303}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":22,"column":2},"generated":{"line":1,"column":307}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":22,"column":8},"generated":{"line":1,"column":311}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":22,"column":19},"generated":{"line":1,"column":313}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":22,"column":31},"generated":{"line":1,"column":325}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":23,"column":4},"generated":{"line":1,"column":336}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":23,"column":12},"generated":{"line":1,"column":344}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":23,"column":16},"generated":{"line":1,"column":348}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":25,"column":4},"generated":{"line":1,"column":367}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":25,"column":24},"generated":{"line":1,"column":370}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":25,"column":24},"generated":{"line":1,"column":372}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":25,"column":24},"generated":{"line":1,"column":374}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":25,"column":34},"generated":{"line":1,"column":385}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":4},"generated":{"line":1,"column":388}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":22},"generated":{"line":1,"column":392}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":22},"generated":{"line":1,"column":396}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":22},"generated":{"line":1,"column":398}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":22},"generated":{"line":1,"column":400}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":22},"generated":{"line":1,"column":402}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":22},"generated":{"line":1,"column":404}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":22},"generated":{"line":1,"column":406}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":22},"generated":{"line":1,"column":408}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":22},"generated":{"line":1,"column":415}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":28,"column":6},"generated":{"line":1,"column":419}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":9},"generated":{"line":1,"column":423}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":28,"column":25},"generated":{"line":1,"column":427}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":28,"column":25},"generated":{"line":1,"column":429}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":28,"column":25},"generated":{"line":1,"column":431}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":18},"generated":{"line":1,"column":433}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":18},"generated":{"line":1,"column":435}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":28,"column":25},"generated":{"line":1,"column":438}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":28,"column":25},"generated":{"line":1,"column":440}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":28,"column":25},"generated":{"line":1,"column":442}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":28,"column":25},"generated":{"line":1,"column":449}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":28,"column":30},"generated":{"line":1,"column":453}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":28,"column":11},"generated":{"line":1,"column":454}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":28,"column":17},"generated":{"line":1,"column":458}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":28,"column":21},"generated":{"line":1,"column":460}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":28,"column":21},"generated":{"line":1,"column":462}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":32,"column":8},"generated":{"line":1,"column":465}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":30,"column":38},"generated":{"line":1,"column":468}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":30,"column":43},"generated":{"line":1,"column":470}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":30,"column":52},"generated":{"line":1,"column":479}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":30,"column":61},"generated":{"line":1,"column":486}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":33,"column":10},"generated":{"line":1,"column":488}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":33,"column":32},"generated":{"line":1,"column":492}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":33,"column":32},"generated":{"line":1,"column":496}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":33,"column":32},"generated":{"line":1,"column":498}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":33,"column":32},"generated":{"line":1,"column":500}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":33,"column":32},"generated":{"line":1,"column":502}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":33,"column":37},"generated":{"line":1,"column":504}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":33,"column":32},"generated":{"line":1,"column":513}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":33,"column":32},"generated":{"line":1,"column":515}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":33,"column":32},"generated":{"line":1,"column":517}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":33,"column":32},"generated":{"line":1,"column":524}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":33,"column":47},"generated":{"line":1,"column":528}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":33,"column":15},"generated":{"line":1,"column":529}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":33,"column":21},"generated":{"line":1,"column":533}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":33,"column":28},"generated":{"line":1,"column":535}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":33,"column":28},"generated":{"line":1,"column":537}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":35,"column":12},"generated":{"line":1,"column":540}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":35,"column":16},"generated":{"line":1,"column":543}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":35,"column":35},"generated":{"line":1,"column":556}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":35,"column":35},"generated":{"line":1,"column":558}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":35,"column":43},"generated":{"line":1,"column":565}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":36,"column":14},"generated":{"line":1,"column":566}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":36,"column":22},"generated":{"line":1,"column":568}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":37,"column":14},"generated":{"line":1,"column":586}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":37,"column":20},"generated":{"line":1,"column":590}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":37,"column":29},"generated":{"line":1,"column":592}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":37,"column":37},"generated":{"line":1,"column":594}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":40,"column":14},"generated":{"line":1,"column":614}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":38,"column":14},"generated":{"line":1,"column":621}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":38,"column":22},"generated":{"line":1,"column":629}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":38,"column":29},"generated":{"line":1,"column":633}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":38,"column":37},"generated":{"line":1,"column":635}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":38,"column":41},"generated":{"line":1,"column":640}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":38,"column":64},"generated":{"line":1,"column":663}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":40,"column":22},"generated":{"line":1,"column":666}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":41,"column":16},"generated":{"line":1,"column":669}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":41,"column":21},"generated":{"line":1,"column":673}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":42,"column":18},"generated":{"line":1,"column":693}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":42,"column":24},"generated":{"line":1,"column":697}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":42,"column":39},"generated":{"line":1,"column":700}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":42,"column":39},"generated":{"line":1,"column":702}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":42,"column":39},"generated":{"line":1,"column":704}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":43,"column":20},"generated":{"line":1,"column":721}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":43,"column":25},"generated":{"line":1,"column":723}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":44,"column":20},"generated":{"line":1,"column":725}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":44,"column":25},"generated":{"line":1,"column":727}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":45,"column":20},"generated":{"line":1,"column":729}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":46,"column":20},"generated":{"line":1,"column":731}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":46,"column":21},"generated":{"line":1,"column":740}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":46,"column":27},"generated":{"line":1,"column":743}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":46,"column":27},"generated":{"line":1,"column":750}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":46,"column":29},"generated":{"line":1,"column":752}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":46,"column":38},"generated":{"line":1,"column":761}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":46,"column":43},"generated":{"line":1,"column":766}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":46,"column":44},"generated":{"line":1,"column":775}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":46,"column":50},"generated":{"line":1,"column":778}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":46,"column":50},"generated":{"line":1,"column":785}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":46,"column":63},"generated":{"line":1,"column":798}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":46,"column":63},"generated":{"line":1,"column":800}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":56,"column":18},"generated":{"line":1,"column":810}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":50,"column":20},"generated":{"line":1,"column":813}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":51,"column":59},"generated":{"line":1,"column":817}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":51,"column":21},"generated":{"line":1,"column":821}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":51,"column":26},"generated":{"line":1,"column":826}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":51,"column":30},"generated":{"line":1,"column":830}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":51,"column":43},"generated":{"line":1,"column":832}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":51,"column":47},"generated":{"line":1,"column":834}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":51,"column":52},"generated":{"line":1,"column":836}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":52,"column":22},"generated":{"line":1,"column":840}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":52,"column":35},"generated":{"line":1,"column":842}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":52,"column":41},"generated":{"line":1,"column":846}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":52,"column":46},"generated":{"line":1,"column":848}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":53,"column":59},"generated":{"line":1,"column":853}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":53,"column":21},"generated":{"line":1,"column":857}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":53,"column":26},"generated":{"line":1,"column":862}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":53,"column":30},"generated":{"line":1,"column":866}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":53,"column":43},"generated":{"line":1,"column":868}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":53,"column":47},"generated":{"line":1,"column":870}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":53,"column":52},"generated":{"line":1,"column":872}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":54,"column":22},"generated":{"line":1,"column":876}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":54,"column":35},"generated":{"line":1,"column":878}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":54,"column":41},"generated":{"line":1,"column":882}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":54,"column":46},"generated":{"line":1,"column":884}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":57,"column":20},"generated":{"line":1,"column":887}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":60,"column":24},"generated":{"line":1,"column":893}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":60,"column":24},"generated":{"line":1,"column":897}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":60,"column":49},"generated":{"line":1,"column":899}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":61,"column":20},"generated":{"line":1,"column":900}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":61,"column":25},"generated":{"line":1,"column":902}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":61,"column":29},"generated":{"line":1,"column":904}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":61,"column":34},"generated":{"line":1,"column":909}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":61,"column":39},"generated":{"line":1,"column":914}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":61,"column":53},"generated":{"line":1,"column":916}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":61,"column":57},"generated":{"line":1,"column":918}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":61,"column":62},"generated":{"line":1,"column":920}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":62,"column":20},"generated":{"line":1,"column":923}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":62,"column":25},"generated":{"line":1,"column":925}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":62,"column":29},"generated":{"line":1,"column":927}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":62,"column":34},"generated":{"line":1,"column":932}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":62,"column":39},"generated":{"line":1,"column":937}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":62,"column":53},"generated":{"line":1,"column":939}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":62,"column":57},"generated":{"line":1,"column":941}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":62,"column":62},"generated":{"line":1,"column":943}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":60,"column":25},"generated":{"line":1,"column":947}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":60,"column":34},"generated":{"line":1,"column":949}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":60,"column":34},"generated":{"line":1,"column":951}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":60,"column":36},"generated":{"line":1,"column":954}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":60,"column":45},"generated":{"line":1,"column":956}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":60,"column":45},"generated":{"line":1,"column":958}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":65,"column":24},"generated":{"line":1,"column":961}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":65,"column":38},"generated":{"line":1,"column":963}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":66,"column":20},"generated":{"line":1,"column":964}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":66,"column":21},"generated":{"line":1,"column":965}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":66,"column":32},"generated":{"line":1,"column":967}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":67,"column":20},"generated":{"line":1,"column":970}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":67,"column":21},"generated":{"line":1,"column":971}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":67,"column":32},"generated":{"line":1,"column":973}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":67,"column":37},"generated":{"line":1,"column":975}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":68,"column":20},"generated":{"line":1,"column":978}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":68,"column":21},"generated":{"line":1,"column":979}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":68,"column":26},"generated":{"line":1,"column":981}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":68,"column":29},"generated":{"line":1,"column":983}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":69,"column":20},"generated":{"line":1,"column":987}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":69,"column":27},"generated":{"line":1,"column":994}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":69,"column":28},"generated":{"line":1,"column":1003}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":69,"column":29},"generated":{"line":1,"column":1006}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":69,"column":29},"generated":{"line":1,"column":1010}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":69,"column":30},"generated":{"line":1,"column":1012}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":69,"column":30},"generated":{"line":1,"column":1014}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":69,"column":32},"generated":{"line":1,"column":1017}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":69,"column":33},"generated":{"line":1,"column":1019}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":69,"column":33},"generated":{"line":1,"column":1021}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":70,"column":20},"generated":{"line":1,"column":1024}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":71,"column":22},"generated":{"line":1,"column":1031}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":71,"column":27},"generated":{"line":1,"column":1034}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":72,"column":22},"generated":{"line":1,"column":1037}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":72,"column":26},"generated":{"line":1,"column":1039}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":72,"column":37},"generated":{"line":1,"column":1041}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":73,"column":22},"generated":{"line":1,"column":1049}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":73,"column":27},"generated":{"line":1,"column":1052}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":74,"column":22},"generated":{"line":1,"column":1055}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":74,"column":26},"generated":{"line":1,"column":1057}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":74,"column":37},"generated":{"line":1,"column":1059}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":74,"column":40},"generated":{"line":1,"column":1062}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":75,"column":23},"generated":{"line":1,"column":1071}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":75,"column":34},"generated":{"line":1,"column":1073}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":75,"column":37},"generated":{"line":1,"column":1076}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":75,"column":40},"generated":{"line":1,"column":1079}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":75,"column":49},"generated":{"line":1,"column":1088}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":75,"column":54},"generated":{"line":1,"column":1093}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":75,"column":55},"generated":{"line":1,"column":1102}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":75,"column":61},"generated":{"line":1,"column":1105}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":75,"column":61},"generated":{"line":1,"column":1112}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":75,"column":63},"generated":{"line":1,"column":1114}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":79,"column":24},"generated":{"line":1,"column":1129}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":80,"column":20},"generated":{"line":1,"column":1131}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":80,"column":32},"generated":{"line":1,"column":1133}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":80,"column":41},"generated":{"line":1,"column":1140}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":80,"column":45},"generated":{"line":1,"column":1142}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":80,"column":57},"generated":{"line":1,"column":1144}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":80,"column":62},"generated":{"line":1,"column":1147}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":80,"column":63},"generated":{"line":1,"column":1148}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":80,"column":68},"generated":{"line":1,"column":1150}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":80,"column":71},"generated":{"line":1,"column":1152}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":80,"column":76},"generated":{"line":1,"column":1154}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":79,"column":25},"generated":{"line":1,"column":1157}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":79,"column":32},"generated":{"line":1,"column":1159}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":79,"column":32},"generated":{"line":1,"column":1161}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":79,"column":34},"generated":{"line":1,"column":1164}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":79,"column":41},"generated":{"line":1,"column":1166}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":79,"column":41},"generated":{"line":1,"column":1168}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":82,"column":24},"generated":{"line":1,"column":1171}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":82,"column":37},"generated":{"line":1,"column":1173}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":82,"column":55},"generated":{"line":1,"column":1175}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":82,"column":64},"generated":{"line":1,"column":1178}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":84,"column":18},"generated":{"line":1,"column":1181}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":85,"column":21},"generated":{"line":1,"column":1185}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":85,"column":32},"generated":{"line":1,"column":1187}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":85,"column":41},"generated":{"line":1,"column":1196}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":85,"column":46},"generated":{"line":1,"column":1201}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":85,"column":47},"generated":{"line":1,"column":1210}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":85,"column":53},"generated":{"line":1,"column":1213}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":85,"column":53},"generated":{"line":1,"column":1220}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":85,"column":55},"generated":{"line":1,"column":1222}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":86,"column":21},"generated":{"line":1,"column":1237}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":86,"column":32},"generated":{"line":1,"column":1239}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":86,"column":41},"generated":{"line":1,"column":1248}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":86,"column":46},"generated":{"line":1,"column":1253}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":86,"column":47},"generated":{"line":1,"column":1262}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":86,"column":53},"generated":{"line":1,"column":1265}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":86,"column":53},"generated":{"line":1,"column":1272}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":86,"column":66},"generated":{"line":1,"column":1285}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":86,"column":66},"generated":{"line":1,"column":1287}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":87,"column":20},"generated":{"line":1,"column":1296}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":88,"column":20},"generated":{"line":1,"column":1297}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":88,"column":26},"generated":{"line":1,"column":1301}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":89,"column":22},"generated":{"line":1,"column":1303}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":89,"column":40},"generated":{"line":1,"column":1305}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":89,"column":45},"generated":{"line":1,"column":1307}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":89,"column":48},"generated":{"line":1,"column":1310}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":89,"column":53},"generated":{"line":1,"column":1312}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":89,"column":56},"generated":{"line":1,"column":1315}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":89,"column":65},"generated":{"line":1,"column":1324}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":90,"column":20},"generated":{"line":1,"column":1330}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":90,"column":31},"generated":{"line":1,"column":1332}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":90,"column":40},"generated":{"line":1,"column":1341}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":90,"column":45},"generated":{"line":1,"column":1346}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":99,"column":4},"generated":{"line":1,"column":1353}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":99,"column":17},"generated":{"line":1,"column":1355}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":101,"column":4},"generated":{"line":1,"column":1358}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":101,"column":4},"generated":{"line":1,"column":1360}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":101,"column":4},"generated":{"line":1,"column":1362}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":101,"column":16},"generated":{"line":1,"column":1375}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":101,"column":18},"generated":{"line":1,"column":1376}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":101,"column":28},"generated":{"line":1,"column":1387}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":101,"column":30},"generated":{"line":1,"column":1389}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":101,"column":35},"generated":{"line":1,"column":1395}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":102,"column":5},"generated":{"line":1,"column":1400}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":105,"column":2},"generated":{"line":1,"column":1405}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":105,"column":9},"generated":{"line":1,"column":1412}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":105,"column":26},"generated":{"line":1,"column":1429}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":105,"column":35},"generated":{"line":1,"column":1437}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":105,"column":36},"generated":{"line":1,"column":1446}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":106,"column":22},"generated":{"line":1,"column":1449}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":106,"column":8},"generated":{"line":1,"column":1460}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":106,"column":14},"generated":{"line":1,"column":1462}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":107,"column":6},"generated":{"line":1,"column":1467}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":107,"column":20},"generated":{"line":1,"column":1481}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":1486}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":1494}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":14,"column":0},"generated":{"line":1,"column":1508}}],"sources":{"src/beginGameLoop.ts":"import { Cell, Animal, Plant, Water, Dirt } from \"./classes\";\r\nimport { findNearestCell } from \"./util/findNearestCell\";\r\nimport { renderBoard } from \"./renderBoard\";\r\nimport { cloneDeep } from \"lodash\";\r\n\r\ninterface IBeginGameLoopParams {\r\n  initialBoardState: Cell[][];\r\n  board: HTMLDivElement;\r\n}\r\n\r\nlet boardState: Cell[][];\r\nlet updatedBoardState: Cell[][];\r\n\r\nexport function beginGameLoop({\r\n  initialBoardState,\r\n  board,\r\n}: IBeginGameLoopParams) {\r\n  // INITIALIZE BOARD AND RENDER FIRST ITERATION\r\n  boardState = initialBoardState;\r\n  renderBoard({ boardState, board });\r\n\r\n  const gameLoop = setInterval(() => {\r\n    console.log(\"ROUND BEGINNING\");\r\n    // Create copy of board state to perform all updates on during iteration so we don't mutate the original while looping\r\n    updatedBoardState = cloneDeep(boardState);\r\n\r\n    for (const row of boardState) {\r\n      for (const cell of row) {\r\n        // Really means contains something other than dirt, since dirt will always be the first item in contents[]\r\n        const cellContainsSomething = cell.contents.length > 1;\r\n\r\n        if (cellContainsSomething) {\r\n          for (const element of cell.contents) {\r\n            // Process animal desires and interactions\r\n            if (element instanceof Animal) {\r\n              element.increaseDesires();\r\n              const desire = element.getGreatestDesire();\r\n              console.log(`${element.type}'s greatest desire: ${desire}`);\r\n\r\n              switch (desire) {\r\n                case \"looking for water\":\r\n                  const nearestWater = findNearestCell(\r\n                    cell.x,\r\n                    cell.y,\r\n                    boardState,\r\n                    (c) => c.contents.some((e) => e instanceof Water)\r\n                  );\r\n\r\n                  const alreadyNextToWater =\r\n                    nearestWater &&\r\n                    (Math.abs(nearestWater.x - cell.x) === 1 ||\r\n                      nearestWater.x === cell.x) &&\r\n                    (Math.abs(nearestWater.y - cell.y) === 1 ||\r\n                      nearestWater.y === cell.y);\r\n\r\n                  if (alreadyNextToWater) {\r\n                    break;\r\n                  }\r\n\r\n                  const [newXValue, newYValue] = [\r\n                    cell.x + Math.sign(nearestWater!.x - cell.x),\r\n                    cell.y + Math.sign(nearestWater!.y - cell.y),\r\n                  ];\r\n\r\n                  const optimalPath = [\r\n                    [newXValue, newYValue],\r\n                    [newXValue, cell.y],\r\n                    [cell.x, newYValue],\r\n                  ].filter(([x, y]) => {\r\n                    return (\r\n                      x >= 0 &&\r\n                      x < boardState.length &&\r\n                      y >= 0 &&\r\n                      y < boardState[0].length &&\r\n                      !boardState[x][y].contents.some((e) => e.isObstacle)\r\n                    );\r\n                  });\r\n\r\n                  const [moveToX, moveToY] =\r\n                    optimalPath.length > 0 ? optimalPath[0] : [cell.x, cell.y];\r\n\r\n                  const targetCell = updatedBoardState[moveToX][moveToY];\r\n\r\n                  if (\r\n                    !targetCell.contents.some((e) => e.isObstacle) &&\r\n                    !targetCell.contents.some((e) => e instanceof Animal)\r\n                  ) {\r\n                    const movingAnimal =\r\n                      updatedBoardState[cell.x][cell.y].contents.pop();\r\n                    targetCell.contents.push(movingAnimal!);\r\n                  }\r\n                  break;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    boardState = updatedBoardState;\r\n    // Now that we have updated the board state we need to re-render it!\r\n    renderBoard({ boardState, board });\r\n  }, 3000);\r\n\r\n  // ---------------------- CREATE GAME CONTROLS ----------------------\r\n  window.addEventListener(\"keyup\", (event) => {\r\n    if (event.key === \"Escape\") {\r\n      clearInterval(gameLoop);\r\n    }\r\n  });\r\n}\r\n"},"lineCount":null}},"error":null,"hash":"189529415c774226393fc1bf3e4d5232","cacheData":{"env":{}}}