{"id":"DGLw","dependencies":[{"name":"/project/TypeScript-Ecosystem-Game/tsconfig.json","includedInParent":true,"mtime":1683654674051},{"name":"/project/TypeScript-Ecosystem-Game/package.json","includedInParent":true,"mtime":1683654674051},{"name":"./classes","loc":{"line":4,"column":24,"index":133},"parent":"/project/TypeScript-Ecosystem-Game/src/beginGameLoop.ts","resolved":"/project/TypeScript-Ecosystem-Game/src/classes.ts"},{"name":"./util/findNearestCell","loc":{"line":5,"column":32,"index":179},"parent":"/project/TypeScript-Ecosystem-Game/src/beginGameLoop.ts","resolved":"/project/TypeScript-Ecosystem-Game/src/util/findNearestCell.ts"},{"name":"./renderBoard","loc":{"line":6,"column":28,"index":234},"parent":"/project/TypeScript-Ecosystem-Game/src/beginGameLoop.ts","resolved":"/project/TypeScript-Ecosystem-Game/src/renderBoard.ts"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.beginGameLoop=void 0;var e=require(\"./classes\"),t=require(\"./util/findNearestCell\"),n=require(\"./renderBoard\");function r(r){var a=r.initialBoardState,o=r.board,s=a;(0,n.renderBoard)({boardState:s,board:o});var i=setInterval(function(){console.log(\"ROUND BEGINNING\");for(var r=0,a=s;r<a.length;r++)for(var i=0,c=a[r];i<c.length;i++){var l=c[i];if(l.contents.length>1)for(var f=0,u=l.contents;f<u.length;f++){var d=u[f];if(d instanceof e.Animal){d.increaseDesires();var v=d.getGreatestDesire();switch(console.log(d.type+\"'s greatest desire: \"+v),v){case\"looking for water\":var g=(0,t.findNearestCell)(l.x,l.y,s,function(t){return t.contents.some(function(t){return t instanceof e.Water})});if(g&&(1===Math.abs(g.x-l.x)||g.x===l.x)&&(1===Math.abs(g.y-l.y)||g.y===l.y))break;var y=[l.x+Math.sign(g.x-l.x),l.y+Math.sign(g.y-l.y)],b=y[0],h=y[1],x=[[b,h],[b,l.y],[l.x,h]].filter(function(e){var t=e[0],n=e[1];return t>=0&&t<s.length&&n>=0&&n<s[0].length&&!s[t][n].contents.some(function(e){return e.isObstacle})}),p=x.length>0?x[0]:[l.x,l.y],m=p[0],N=p[1],B=s[m][N];if(!B.contents.some(function(e){return e.isObstacle})&&!B.contents.some(function(t){return t instanceof e.Animal})){var G=l.contents.pop();B.contents.push(G)}}}}}(0,n.renderBoard)({boardState:s,board:o})},3e3);window.addEventListener(\"keyup\",function(e){\"Escape\"===e.key&&clearInterval(i)})}exports.beginGameLoop=r;"},"sourceMaps":{"js":{"mappings":[{"source":"src/beginGameLoop.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":0}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":13}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":20}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":35}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":43}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":56}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":57}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":64}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":68}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":76}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":95}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":97}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":101}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":103}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":111}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":124}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":126}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":134}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":160}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":162}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":170}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":187}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":10,"column":16},"generated":{"line":1,"column":196}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":10,"column":30},"generated":{"line":1,"column":198}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":11,"column":2},"generated":{"line":1,"column":201}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":11,"column":2},"generated":{"line":1,"column":205}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":11,"column":19},"generated":{"line":1,"column":207}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":11,"column":19},"generated":{"line":1,"column":209}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":12,"column":2},"generated":{"line":1,"column":227}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":12,"column":7},"generated":{"line":1,"column":229}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":12,"column":7},"generated":{"line":1,"column":231}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":15,"column":8},"generated":{"line":1,"column":237}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":15,"column":21},"generated":{"line":1,"column":239}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":16,"column":2},"generated":{"line":1,"column":242}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":16,"column":2},"generated":{"line":1,"column":244}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":16,"column":2},"generated":{"line":1,"column":246}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":16,"column":14},"generated":{"line":1,"column":259}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":16,"column":16},"generated":{"line":1,"column":260}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":16,"column":26},"generated":{"line":1,"column":271}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":16,"column":28},"generated":{"line":1,"column":273}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":16,"column":33},"generated":{"line":1,"column":279}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":18,"column":2},"generated":{"line":1,"column":283}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":18,"column":8},"generated":{"line":1,"column":287}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":18,"column":19},"generated":{"line":1,"column":289}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":18,"column":31},"generated":{"line":1,"column":301}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":19,"column":4},"generated":{"line":1,"column":312}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":19,"column":12},"generated":{"line":1,"column":320}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":19,"column":16},"generated":{"line":1,"column":324}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":21,"column":4},"generated":{"line":1,"column":343}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":21,"column":22},"generated":{"line":1,"column":347}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":21,"column":22},"generated":{"line":1,"column":351}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":21,"column":22},"generated":{"line":1,"column":353}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":21,"column":22},"generated":{"line":1,"column":355}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":21,"column":22},"generated":{"line":1,"column":357}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":21,"column":22},"generated":{"line":1,"column":359}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":21,"column":22},"generated":{"line":1,"column":361}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":21,"column":22},"generated":{"line":1,"column":363}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":21,"column":22},"generated":{"line":1,"column":370}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":22,"column":6},"generated":{"line":1,"column":374}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":21,"column":9},"generated":{"line":1,"column":378}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":22,"column":25},"generated":{"line":1,"column":382}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":22,"column":25},"generated":{"line":1,"column":384}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":22,"column":25},"generated":{"line":1,"column":386}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":21,"column":18},"generated":{"line":1,"column":388}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":21,"column":18},"generated":{"line":1,"column":390}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":22,"column":25},"generated":{"line":1,"column":393}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":22,"column":25},"generated":{"line":1,"column":395}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":22,"column":25},"generated":{"line":1,"column":397}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":22,"column":25},"generated":{"line":1,"column":404}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":22,"column":30},"generated":{"line":1,"column":408}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":22,"column":11},"generated":{"line":1,"column":409}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":22,"column":17},"generated":{"line":1,"column":413}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":22,"column":21},"generated":{"line":1,"column":415}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":22,"column":21},"generated":{"line":1,"column":417}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":26,"column":8},"generated":{"line":1,"column":420}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":24,"column":38},"generated":{"line":1,"column":423}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":24,"column":43},"generated":{"line":1,"column":425}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":24,"column":52},"generated":{"line":1,"column":434}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":24,"column":61},"generated":{"line":1,"column":441}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":10},"generated":{"line":1,"column":443}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":32},"generated":{"line":1,"column":447}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":32},"generated":{"line":1,"column":451}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":32},"generated":{"line":1,"column":453}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":32},"generated":{"line":1,"column":455}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":32},"generated":{"line":1,"column":457}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":37},"generated":{"line":1,"column":459}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":32},"generated":{"line":1,"column":468}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":32},"generated":{"line":1,"column":470}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":32},"generated":{"line":1,"column":472}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":32},"generated":{"line":1,"column":479}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":47},"generated":{"line":1,"column":483}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":15},"generated":{"line":1,"column":484}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":21},"generated":{"line":1,"column":488}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":28},"generated":{"line":1,"column":490}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":27,"column":28},"generated":{"line":1,"column":492}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":29,"column":12},"generated":{"line":1,"column":495}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":29,"column":16},"generated":{"line":1,"column":498}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":29,"column":35},"generated":{"line":1,"column":511}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":29,"column":35},"generated":{"line":1,"column":513}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":29,"column":43},"generated":{"line":1,"column":520}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":30,"column":14},"generated":{"line":1,"column":521}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":30,"column":22},"generated":{"line":1,"column":523}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":31,"column":14},"generated":{"line":1,"column":541}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":31,"column":20},"generated":{"line":1,"column":545}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":31,"column":29},"generated":{"line":1,"column":547}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":31,"column":37},"generated":{"line":1,"column":549}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":34,"column":14},"generated":{"line":1,"column":569}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":32,"column":14},"generated":{"line":1,"column":576}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":32,"column":22},"generated":{"line":1,"column":584}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":32,"column":29},"generated":{"line":1,"column":588}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":32,"column":37},"generated":{"line":1,"column":590}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":32,"column":41},"generated":{"line":1,"column":595}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":32,"column":64},"generated":{"line":1,"column":618}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":34,"column":22},"generated":{"line":1,"column":621}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":35,"column":16},"generated":{"line":1,"column":624}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":35,"column":21},"generated":{"line":1,"column":628}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":36,"column":18},"generated":{"line":1,"column":648}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":36,"column":24},"generated":{"line":1,"column":652}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":36,"column":39},"generated":{"line":1,"column":655}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":36,"column":39},"generated":{"line":1,"column":657}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":36,"column":39},"generated":{"line":1,"column":659}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":37,"column":20},"generated":{"line":1,"column":676}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":37,"column":25},"generated":{"line":1,"column":678}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":38,"column":20},"generated":{"line":1,"column":680}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":38,"column":25},"generated":{"line":1,"column":682}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":39,"column":20},"generated":{"line":1,"column":684}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":40,"column":20},"generated":{"line":1,"column":686}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":40,"column":21},"generated":{"line":1,"column":695}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":40,"column":27},"generated":{"line":1,"column":698}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":40,"column":27},"generated":{"line":1,"column":705}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":40,"column":29},"generated":{"line":1,"column":707}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":40,"column":38},"generated":{"line":1,"column":716}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":40,"column":43},"generated":{"line":1,"column":721}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":40,"column":44},"generated":{"line":1,"column":730}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":40,"column":50},"generated":{"line":1,"column":733}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":40,"column":50},"generated":{"line":1,"column":740}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":40,"column":63},"generated":{"line":1,"column":753}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":40,"column":63},"generated":{"line":1,"column":755}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":50,"column":18},"generated":{"line":1,"column":765}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":44,"column":20},"generated":{"line":1,"column":768}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":45,"column":59},"generated":{"line":1,"column":772}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":45,"column":21},"generated":{"line":1,"column":776}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":45,"column":26},"generated":{"line":1,"column":781}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":45,"column":30},"generated":{"line":1,"column":785}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":45,"column":43},"generated":{"line":1,"column":787}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":45,"column":47},"generated":{"line":1,"column":789}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":45,"column":52},"generated":{"line":1,"column":791}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":46,"column":22},"generated":{"line":1,"column":795}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":46,"column":35},"generated":{"line":1,"column":797}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":46,"column":41},"generated":{"line":1,"column":801}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":46,"column":46},"generated":{"line":1,"column":803}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":47,"column":59},"generated":{"line":1,"column":808}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":47,"column":21},"generated":{"line":1,"column":812}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":47,"column":26},"generated":{"line":1,"column":817}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":47,"column":30},"generated":{"line":1,"column":821}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":47,"column":43},"generated":{"line":1,"column":823}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":47,"column":47},"generated":{"line":1,"column":825}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":47,"column":52},"generated":{"line":1,"column":827}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":48,"column":22},"generated":{"line":1,"column":831}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":48,"column":35},"generated":{"line":1,"column":833}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":48,"column":41},"generated":{"line":1,"column":837}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":48,"column":46},"generated":{"line":1,"column":839}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":51,"column":20},"generated":{"line":1,"column":842}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":54,"column":24},"generated":{"line":1,"column":848}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":54,"column":24},"generated":{"line":1,"column":852}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":54,"column":49},"generated":{"line":1,"column":854}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":55,"column":20},"generated":{"line":1,"column":855}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":55,"column":25},"generated":{"line":1,"column":857}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":55,"column":29},"generated":{"line":1,"column":859}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":55,"column":34},"generated":{"line":1,"column":864}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":55,"column":39},"generated":{"line":1,"column":869}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":55,"column":53},"generated":{"line":1,"column":871}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":55,"column":57},"generated":{"line":1,"column":873}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":55,"column":62},"generated":{"line":1,"column":875}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":56,"column":20},"generated":{"line":1,"column":878}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":56,"column":25},"generated":{"line":1,"column":880}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":56,"column":29},"generated":{"line":1,"column":882}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":56,"column":34},"generated":{"line":1,"column":887}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":56,"column":39},"generated":{"line":1,"column":892}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":56,"column":53},"generated":{"line":1,"column":894}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":56,"column":57},"generated":{"line":1,"column":896}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":56,"column":62},"generated":{"line":1,"column":898}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":54,"column":25},"generated":{"line":1,"column":902}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":54,"column":34},"generated":{"line":1,"column":904}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":54,"column":34},"generated":{"line":1,"column":906}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":54,"column":36},"generated":{"line":1,"column":909}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":54,"column":45},"generated":{"line":1,"column":911}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":54,"column":45},"generated":{"line":1,"column":913}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":59,"column":24},"generated":{"line":1,"column":916}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":59,"column":38},"generated":{"line":1,"column":918}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":60,"column":20},"generated":{"line":1,"column":919}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":60,"column":21},"generated":{"line":1,"column":920}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":60,"column":32},"generated":{"line":1,"column":922}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":61,"column":20},"generated":{"line":1,"column":925}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":61,"column":21},"generated":{"line":1,"column":926}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":61,"column":32},"generated":{"line":1,"column":928}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":61,"column":37},"generated":{"line":1,"column":930}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":62,"column":20},"generated":{"line":1,"column":933}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":62,"column":21},"generated":{"line":1,"column":934}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":62,"column":26},"generated":{"line":1,"column":936}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":62,"column":29},"generated":{"line":1,"column":938}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":63,"column":20},"generated":{"line":1,"column":942}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":63,"column":27},"generated":{"line":1,"column":949}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":63,"column":28},"generated":{"line":1,"column":958}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":63,"column":29},"generated":{"line":1,"column":961}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":63,"column":29},"generated":{"line":1,"column":965}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":63,"column":30},"generated":{"line":1,"column":967}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":63,"column":30},"generated":{"line":1,"column":969}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":63,"column":32},"generated":{"line":1,"column":972}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":63,"column":33},"generated":{"line":1,"column":974}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":63,"column":33},"generated":{"line":1,"column":976}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":64,"column":20},"generated":{"line":1,"column":979}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":65,"column":22},"generated":{"line":1,"column":986}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":65,"column":27},"generated":{"line":1,"column":989}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":66,"column":22},"generated":{"line":1,"column":992}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":66,"column":26},"generated":{"line":1,"column":994}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":66,"column":37},"generated":{"line":1,"column":996}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":67,"column":22},"generated":{"line":1,"column":1004}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":67,"column":27},"generated":{"line":1,"column":1007}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":68,"column":22},"generated":{"line":1,"column":1010}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":68,"column":26},"generated":{"line":1,"column":1012}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":68,"column":37},"generated":{"line":1,"column":1014}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":68,"column":40},"generated":{"line":1,"column":1017}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":69,"column":23},"generated":{"line":1,"column":1026}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":69,"column":34},"generated":{"line":1,"column":1028}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":69,"column":37},"generated":{"line":1,"column":1031}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":69,"column":40},"generated":{"line":1,"column":1034}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":69,"column":49},"generated":{"line":1,"column":1043}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":69,"column":54},"generated":{"line":1,"column":1048}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":69,"column":55},"generated":{"line":1,"column":1057}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":69,"column":61},"generated":{"line":1,"column":1060}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":69,"column":61},"generated":{"line":1,"column":1067}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":69,"column":63},"generated":{"line":1,"column":1069}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":73,"column":24},"generated":{"line":1,"column":1084}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":74,"column":20},"generated":{"line":1,"column":1086}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":74,"column":32},"generated":{"line":1,"column":1088}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":74,"column":41},"generated":{"line":1,"column":1095}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":74,"column":45},"generated":{"line":1,"column":1097}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":74,"column":57},"generated":{"line":1,"column":1099}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":74,"column":62},"generated":{"line":1,"column":1102}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":74,"column":63},"generated":{"line":1,"column":1103}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":74,"column":68},"generated":{"line":1,"column":1105}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":74,"column":71},"generated":{"line":1,"column":1107}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":74,"column":76},"generated":{"line":1,"column":1109}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":73,"column":25},"generated":{"line":1,"column":1112}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":73,"column":32},"generated":{"line":1,"column":1114}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":73,"column":32},"generated":{"line":1,"column":1116}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":73,"column":34},"generated":{"line":1,"column":1119}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":73,"column":41},"generated":{"line":1,"column":1121}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":73,"column":41},"generated":{"line":1,"column":1123}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":76,"column":24},"generated":{"line":1,"column":1126}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":76,"column":37},"generated":{"line":1,"column":1128}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":76,"column":48},"generated":{"line":1,"column":1130}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":76,"column":57},"generated":{"line":1,"column":1133}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":78,"column":18},"generated":{"line":1,"column":1136}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":79,"column":21},"generated":{"line":1,"column":1140}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":79,"column":32},"generated":{"line":1,"column":1142}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":79,"column":41},"generated":{"line":1,"column":1151}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":79,"column":46},"generated":{"line":1,"column":1156}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":79,"column":47},"generated":{"line":1,"column":1165}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":79,"column":53},"generated":{"line":1,"column":1168}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":79,"column":53},"generated":{"line":1,"column":1175}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":79,"column":55},"generated":{"line":1,"column":1177}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":80,"column":21},"generated":{"line":1,"column":1192}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":80,"column":32},"generated":{"line":1,"column":1194}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":80,"column":41},"generated":{"line":1,"column":1203}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":80,"column":46},"generated":{"line":1,"column":1208}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":80,"column":47},"generated":{"line":1,"column":1217}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":80,"column":53},"generated":{"line":1,"column":1220}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":80,"column":53},"generated":{"line":1,"column":1227}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":80,"column":66},"generated":{"line":1,"column":1240}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":80,"column":66},"generated":{"line":1,"column":1242}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":81,"column":20},"generated":{"line":1,"column":1251}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":82,"column":20},"generated":{"line":1,"column":1252}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":82,"column":26},"generated":{"line":1,"column":1256}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":82,"column":41},"generated":{"line":1,"column":1258}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":82,"column":46},"generated":{"line":1,"column":1260}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":82,"column":55},"generated":{"line":1,"column":1269}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":83,"column":20},"generated":{"line":1,"column":1275}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":83,"column":31},"generated":{"line":1,"column":1277}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":83,"column":40},"generated":{"line":1,"column":1286}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":83,"column":45},"generated":{"line":1,"column":1291}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":93,"column":4},"generated":{"line":1,"column":1299}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":93,"column":4},"generated":{"line":1,"column":1301}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":93,"column":4},"generated":{"line":1,"column":1303}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":93,"column":16},"generated":{"line":1,"column":1316}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":93,"column":18},"generated":{"line":1,"column":1317}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":93,"column":28},"generated":{"line":1,"column":1328}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":93,"column":30},"generated":{"line":1,"column":1330}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":93,"column":35},"generated":{"line":1,"column":1336}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":94,"column":5},"generated":{"line":1,"column":1341}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":97,"column":2},"generated":{"line":1,"column":1346}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":97,"column":9},"generated":{"line":1,"column":1353}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":97,"column":26},"generated":{"line":1,"column":1370}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":97,"column":35},"generated":{"line":1,"column":1378}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":97,"column":36},"generated":{"line":1,"column":1387}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":98,"column":22},"generated":{"line":1,"column":1390}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":98,"column":8},"generated":{"line":1,"column":1401}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":98,"column":14},"generated":{"line":1,"column":1403}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":99,"column":6},"generated":{"line":1,"column":1408}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":99,"column":20},"generated":{"line":1,"column":1422}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":1427}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":1435}},{"source":"src/beginGameLoop.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":1449}}],"sources":{"src/beginGameLoop.ts":"import { Cell, Animal, Plant, Water, Dirt } from \"./classes\";\r\nimport { findNearestCell } from \"./util/findNearestCell\";\r\nimport { renderBoard } from \"./renderBoard\";\r\n\r\ninterface IBeginGameLoopParams {\r\n  initialBoardState: Cell[][];\r\n  board: HTMLDivElement;\r\n}\r\n\r\nexport function beginGameLoop({\r\n  initialBoardState,\r\n  board,\r\n}: IBeginGameLoopParams) {\r\n  // INITIALIZE BOARD AND RENDER FIRST ITERATION\r\n  const boardState = initialBoardState;\r\n  renderBoard({ boardState, board });\r\n\r\n  const gameLoop = setInterval(() => {\r\n    console.log(\"ROUND BEGINNING\");\r\n\r\n    for (const row of boardState) {\r\n      for (const cell of row) {\r\n        // Really means contains something other than dirt, since dirt will always be the first item in contents[]\r\n        const cellContainsSomething = cell.contents.length > 1;\r\n\r\n        if (cellContainsSomething) {\r\n          for (const element of cell.contents) {\r\n            // Process animal desires and interactions\r\n            if (element instanceof Animal) {\r\n              element.increaseDesires();\r\n              const desire = element.getGreatestDesire();\r\n              console.log(`${element.type}'s greatest desire: ${desire}`);\r\n\r\n              switch (desire) {\r\n                case \"looking for water\":\r\n                  const nearestWater = findNearestCell(\r\n                    cell.x,\r\n                    cell.y,\r\n                    boardState,\r\n                    (c) => c.contents.some((e) => e instanceof Water)\r\n                  );\r\n\r\n                  const alreadyNextToWater =\r\n                    nearestWater &&\r\n                    (Math.abs(nearestWater.x - cell.x) === 1 ||\r\n                      nearestWater.x === cell.x) &&\r\n                    (Math.abs(nearestWater.y - cell.y) === 1 ||\r\n                      nearestWater.y === cell.y);\r\n\r\n                  if (alreadyNextToWater) {\r\n                    break;\r\n                  }\r\n\r\n                  const [newXValue, newYValue] = [\r\n                    cell.x + Math.sign(nearestWater!.x - cell.x),\r\n                    cell.y + Math.sign(nearestWater!.y - cell.y),\r\n                  ];\r\n\r\n                  const optimalPath = [\r\n                    [newXValue, newYValue],\r\n                    [newXValue, cell.y],\r\n                    [cell.x, newYValue],\r\n                  ].filter(([x, y]) => {\r\n                    return (\r\n                      x >= 0 &&\r\n                      x < boardState.length &&\r\n                      y >= 0 &&\r\n                      y < boardState[0].length &&\r\n                      !boardState[x][y].contents.some((e) => e.isObstacle)\r\n                    );\r\n                  });\r\n\r\n                  const [moveToX, moveToY] =\r\n                    optimalPath.length > 0 ? optimalPath[0] : [cell.x, cell.y];\r\n\r\n                  const targetCell = boardState[moveToX][moveToY];\r\n\r\n                  if (\r\n                    !targetCell.contents.some((e) => e.isObstacle) &&\r\n                    !targetCell.contents.some((e) => e instanceof Animal)\r\n                  ) {\r\n                    const movingAnimal = cell.contents.pop();\r\n                    targetCell.contents.push(movingAnimal!);\r\n                  }\r\n                  break;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // Now that we have updated the board state we need to re-render it!\r\n    renderBoard({ boardState, board });\r\n  }, 3000);\r\n\r\n  // ---------------------- CREATE GAME CONTROLS ----------------------\r\n  window.addEventListener(\"keyup\", (event) => {\r\n    if (event.key === \"Escape\") {\r\n      clearInterval(gameLoop);\r\n    }\r\n  });\r\n}\r\n"},"lineCount":null}},"error":null,"hash":"1de6ee6744f4e0a63abd5535689f42bb","cacheData":{"env":{}}}